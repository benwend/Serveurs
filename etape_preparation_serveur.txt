*** 5 premières minutes sur un serveur Debian ***

** Source : http://blog.nicolargo.com/2013/03/mes-5-premieres-minutes-sur-un-serveur-debian.html

1) Création de compte :
	- Ne pas utiliser le compte root
	- Créer un compte qui se connectera avec sudo

2) SSH
	- Pousser la clé publique sur le serveur distant : ssh-copy-id morpheus@monserveur
	- Dans etc/ssh/sshd_config :
		_ Désactiver connexion root -> PermitRootLogin no
		_ Désactiver connexion par mot de passe -> PasswordAuthentication no
	- Relancer SSH : sudo service  ssh restart
			
3) Contrôler les entrées avec Fail2ban
	- Installer Fail2ban : sudo apt-get-install fail2ban
	- Éditer le fichier /etc/fail2ban/jail.conf :
		[ssh]
		enabled = true
		port = ssh
		filter = sshd
		action = iptables[name=SSH, port=ssh, protocol=tcp]
		logpath = /var/log/auth.log
		maxretry = 3
		bantime = 300

	- Relancer Fail2ban : sudo service fail2ban restart

4) Fermer les fenêtres du Firewall
	- sudo wget --no-check-certificate -O /etc/init.d/firewall.sh https://raw.github.com/nicolargo/debianpostinstall/master/firewall.sh
	- sudo chmod a+x /etc/init.d/firewall.sh
	- sudo update-rc.d firewall.sh defaults 20

5) Prendre soin de ses fondations en tenant son système à jour
	- sudo apt-get install cron-apt
	- sudo nano /etc/cron-apt/config
		MAILTO="contact@benjamin-wendling.fr"

6) Surveiller le tout avec Logwatch
	- sudo apt-get install logwatch
	- /usr/sbin/logwatch --output mail --mailto contact@benjamin-wendling.fr --detail high